WH=WH||{},WH.maps={},WH.maps.service="",WH.maps.infowindow="",WH.maps.bounds="",WH.maps.coords=[{name:"Spring Vallery",ob:32.938748,pb:-96.799017},{name:"635 & Toll Way",ob:32.926193,pb:-96.822243},{name:"Micking Bord",ob:32.837806,pb:-96.774666},{name:"Holy Grail Pub",ob:32.78014,pb:-96.800451}],WH.maps.center="",WH.maps.map="",WH.maps.places={count:0,length:0,list:[],html:""},WH.maps.mapOptions={zoom:12},WH.maps.initialize=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var b=a.coords;WH.maps.setup({name:"Current Location",ob:b.latitude,pb:b.longitude,marker:"http://www.googlemapsmarkers.com/v1/7F00FF"})}):WH.maps.setup()},WH.maps.setup=function(a){var b,c,d=new google.maps.LatLngBounds,e=WH.maps.coords;e.push(a);for(b in e)d.extend(new google.maps.LatLng(e[b].ob,e[b].pb));WH.maps.center=d.getCenter(),WH.maps.mapOptions.center=WH.maps.center,WH.maps.map=new google.maps.Map(document.getElementById("map-canvas"),WH.maps.mapOptions),WH.maps.paintRadius(),e.push({name:"center",geometry:{location:WH.maps.center},marker:new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/009900/")}),WH.maps.plotMarkers(e,{marker:"http://www.googlemapsmarkers.com/v1/3399FF/"}),c=e[e.length-1].geometry.location,WH.maps.requestServices({location:new google.maps.LatLng(c.ob,c.pb),radius:"2000",types:["restaurant","cafe"]})},WH.maps.requestServices=function(a){var b=new google.maps.places.PlacesService(WH.maps.map);b.nearbySearch(a,function(a){WH.maps.places.list=a,WH.maps.places.length=a.length,WH.maps.plotMarkers(a)})},WH.maps.listPlaces=function(a){var b=WH.maps.places,c="";c+='<div class="places" id="p'+b.count+'">',c+='<img src="'+a.icon+'" />',c+="<ul>",c+="<li>"+a.name+"</li>",c+="<li>"+a.vicinity+"</li>",c+="</ul>",c+="</div>",b.html+=c,b.count++,b.count==b.length-1&&$(".directions").append('<div id="places">'+b.html+"</div>")},WH.maps.plotMarkers=function(a,b){var c,d,e,f,g;for(d in a)g="m"+a[d],a[d].geometry?(e=a[d].geometry.location,c={position:new google.maps.LatLng(e.ob,e.pb),icon:a[d].marker,map:WH.maps.map,id:g}):(e=a[d],b.marker=a[d].marker||b.marker,c={position:new google.maps.LatLng(e.ob,e.pb),map:WH.maps.map,icon:b.marker,id:g}),f=new google.maps.Marker(c),a[d].id&&(WH.maps.listPlaces(a[d]),WH.maps.hoverMarker(f,d)),"center"===a[d].name&&WH.maps.bounceMarker(f)},WH.maps.hoverMarker=function(a,b){google.maps.event.addListener(a,"mouseover",function(){$("#p"+b).css("background","#F5F5F5").hover(function(){WH.maps.bounceMarker(a)})}),google.maps.event.addListener(a,"mouseout",function(){$("#p"+b).css("background","#fff")})},WH.maps.bounceMarker=function(a){a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},1760)},WH.maps.paintRadius=function(){var a="#006600",b={strokeColor:a,strokeOpacity:.8,strokeWeight:2,fillColor:a,fillOpacity:.35,map:WH.maps.map,center:WH.maps.center,radius:2e3};new google.maps.Circle(b)};var WH=WH||{};WH.initialize=function(){google.maps.event.addDomListener(window,"load",WH.maps.initialize)},WH.initialize();